# ==============================================================================
# FADC500 DAQ 프로그램 (frontend_500_mini) 설정 파일
# ==============================================================================
# 각 파라미터는 '=' 기호로 값을 지정하며, '#' 기호 뒤는 주석입니다.
# 모든 시간 단위는 나노초(ns)가 기본입니다.

# [하드웨어 기본 설정]
sid = 1                 # 장비에 할당된 고유 ID (Serial ID)
sampling_rate = 1       # ADC 샘플링 속도. 0: 500MSa/s, 1: 250MSa/s, 2: 125MSa/s

# [DAQ 기본 파라미터]
recording_length  = 8   # 트리거 발생 시 저장할 파형의 길이.
                        # 단위: 코드 값 (1=128ns, 2=256ns, 4=512ns, 8=1us, ...)
prescale = 1            # 트리거 분주비. 1은 모든 트리거를 수용, 10은 10개 중 1개만 수용.
                        # 범위: 1 ~ 65535

# [채널 공통 설정]
# 아래 설정들은 4개 채널에 동일하게 적용됩니다.
adc_offset = 3500       # ADC 입력의 DC 오프셋 조정. 파형의 베이스라인을 조절합니다.
                        # 단위: DAC count, 범위: 0 ~ 4095 (1 count = 0.5mV)
waveform_delay = 200    # 트리거 발생 시점으로부터 얼마나 이전의 파형부터 저장할지 결정합니다.
                        # 단위: ns, 범위: 0 ~ 32760, 정밀도: 8ns
polarity = 0            # 입력 신호의 극성. 0: Negative (음극), 1: Positive (양극)
adc_mode = 1            # ADC 아날로그 대역폭. 노이즈에 민감할 경우 조절합니다.
                        # 0: 250MHz, 1: 125MHz
coincidence_width = 1000 # 여러 채널의 동시 트리거를 판별할 시간 창(window)의 폭.
                         # 단위: ns, 범위: 8 ~ 32760, 정밀도: 8ns

# [트리거 조건 상세 설정]
threshold = 50          # 트리거를 발생시킬 신호의 최소 높이(문턱값).
                        # 단위: ADC counts, 범위: 1 ~ 4095
peak_sum_width = 2      # 'Peak Sum' 트리거 모드에서 피크 면적을 계산할 시간 폭.
                        # 단위: ns, 범위: 2 ~ 8190, 정밀도: 2ns
pulse_count_threshold = 1 # 'Pulse Count' 트리거 모드에서 설정된 시간 내에 들어와야 할 펄스 개수.
                          # 범위: 1 ~ 15
pulse_count_interval = 1000 # 'Pulse Count' 트리거를 위한 시간 간격.
                            # 단위: ns, 범위: 32 ~ 8160, 정밀도: 32ns
pulse_width_threshold = 100 # 'Pulse Width' 트리거 모드에서 신호의 폭(시간) 조건.
                            # 단위: ns, 범위: 2 ~ 1022, 정밀도: 2ns
trigger_deadtime = 0    # 한 번 트리거가 발생한 후 다음 트리거를 무시할 시간. 0은 비활성화.
                        # 단위: ns, 범위: 0 ~ 8355840, 정밀도: 32768ns

# [트리거 소스 및 조합 설정]
trigger_lookup_table = 65534 # 4개 채널의 내부 트리거 신호를 조합하여 최종 트리거를 만드는 테이블.
                             # 16비트 값. 65534는 0xFFFE에 해당하며, 4개 채널의 OR 조건임.
pedestal_trigger_interval = 0 # 주기적으로 강제 트리거(Pedestal)를 발생시킬 시간 간격. 0은 비활성화.
                              # 단위: ms

# [트리거 모드 선택 (비트마스크)]
# 어떤 종류의 내부 트리거를 사용할지 선택합니다. 여러 개를 사용하려면 숫자를 더합니다.
# 1: Pulse Count (펄스 개수)
# 2: Pulse Width (펄스 폭)
# 4: Peak Sum (피크 면적)
# 8: Peak Sum OR (TDC 트리거, 매뉴얼상으로는 TDC trigger이나 코드상으로는 Peak Sum OR로 추정)
trigger_mode      = 1

# [트리거 활성화 (비트마스크)]
# 어떤 소스로부터의 트리거를 최종적으로 수용할지 선택합니다.
# 1: Self (모듈 자체 내부 트리거)
# 2: Pedestal (주기적인 강제 트리거)
# 4: Software (소프트웨어 명령 트리거)
# 8: External (외부 입력 트리거)
trigger_enable    = 1
